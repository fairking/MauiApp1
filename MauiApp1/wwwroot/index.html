<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
	<title>MauiApp1</title>
	<base href="/" />
</head>

<body>

	<div id="app">Loading...</div>

	<button onclick="CallCSharp()">Click</button>

	<script src="_framework/blazor.webview.js" autostart="false"></script>

	<script type="text/javascript">

		window.addEventListener('load', async (event) => {
            let heartbeat = 500
            do {
                try {
                    await CallCSharp();
                    break;
				} catch (error) {
                    document.getElementById("app").innerHTML = error + heartbeat;
                    await new Promise(resolve => setTimeout(resolve, heartbeat));
                    heartbeat *= 1.5;
                }
            } while (true)
		});

		async function CallCSharp() {
            document.getElementById("app").innerHTML = await window.DotNet.invokeMethodAsync('MauiApp1', 'CallMeFromJs', "Hello World");
        };

	</script>

</body>

</html>
